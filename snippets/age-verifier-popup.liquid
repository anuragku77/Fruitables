{% if section.settings.enable_age_verification %}
  {% capture ageverificationpopup %}
      {% if section.settings.age_logo_img != blank %}
         <div class="popup-logo">
          	 <img
                    srcset="{{ section.settings.age_logo_img | image_url: width: 200 }} 1x, {{ section.settings.age_logo_img | image_url: width: 200 }} 2x"
                    src="{{ section.settings.age_logo_img | image_url: width:200 }}"
                    loading="lazy"
                    aspect-ratio="{{ section.settings.age_logo_img.aspect_ratio }}"
                    width="200"
                    height="{{ 200 | divided_by:section.settings.age_logo_img.aspect_ratio }}"
                    alt="{{ section.settings.age_logo_img.alt | default: shop.name | escape }}"
                  >
        </div>
      {% endif %}
    <div class="age-verification-popup-wrapper">
    
      {% if section.settings.age_verification_heading != blank %}
        <div class="popup-heading">
            <h3 class="popup-title">{{ section.settings.age_verification_heading }}</h3>
        </div>
    {% endif %}
    {% if section.settings.age_verification_content != blank %}
      <div class="popup-descption">
         {{ section.settings.age_verification_content }}
      </div>
    {% endif %}
    {% if section.settings.approve_text != blank or section.settings.decline_text != blank %}
      <div class="popup-btns">
      {% if section.settings.decline_text != blank %}
         <button type="button" class="btn" data-decline-age-button><span>{{ section.settings.decline_text }}</span></button>
      {% endif %}
      {% if section.settings.approve_text != blank %}
           <button type="button" class="btn fill-btn" data-approve-age-button><span>{{ section.settings.approve_text }}</span></button>   
        {% endif %}
      </div>
      {% endif %}
    </div>
    <div class="hidden age-decline-message" data-decline-container>
          <h3 class="age-verification-heading">{{ section.settings.decline_heading }}</h3>
          <div class="age-verification-description">{{ section.settings.decline_subheading }}</div>
          <div class="age-verifiction-button">
              <button class="btn fill-btn" data-age-back-button><span>{{ section.settings.age_decline_button_text }}</span></button>
          </div> 
	</div>
    
    {% comment %}
     {% if section.section.settings.show_social %}
          <div class="social-icons-wrapper">
                {% render 'social-media' %}
          </div>
      {% endif %}
    {% endcomment %}
    
    
{% endcapture %}
  <age-verification
    data-ageverification="true"
    data-model-main-body
    data-expiry="{{ section.settings.agepopup_cookie_set }}"
  >
    <div
      id="ageverification-popup"
      class="age-verification-popup modal-drawer-panel"
      data-model-main-body
    >
      <div class="blur-layer-bg"></div>
      <div class="modal-drawer-card">
        <div class="align-center modal-drawer-inner">
          <div class="modal-drawer--body" data-model-content-wrapper>
            <div class="modal-content-box">
              {{ ageverificationpopup }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </age-verification>
  <script src="{{ 'age-verification.js' | asset_url }}" defer></script>
{% endif %}

<style>
    .side-drawer-panel,
  .modal-drawer-panel {
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      z-index: 99;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.4s ease, visibility 0.4s ease;
      pointer-events: none;
  }

  .modal-drawer-panel.active {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
  }

  .blur-layer-bg {
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      transition: opacity 0.4s ease, backdrop-filter 0.4s ease;
      backdrop-filter: blur(4px);
      pointer-events: none;
  }

  .modal-drawer-panel.active .blur-layer-bg {
      backdrop-filter: blur(15px);
      pointer-events: all;
  }

  .modal-drawer-card {
      position: relative;
      margin: auto;
      width: 90%;
      max-width: 680px;
      padding: 40px;
      background-color: var(--bodyColor);
      border-radius: var(--boxRadius);
      box-shadow: 0px 15px 30px rgba(0, 0, 0, 0.2);
      transform: translateY(-50%);
      top: 50%;
      transition: transform 0.4s ease;
  }

  .popup-logo {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
  }

  .popup-title {
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
  }

  .popup-description {
      text-align: center;
      margin-bottom: 20px;
      font-size: 16px;
  }

  .popup-btns {
      display: flex;
      justify-content: center;
      gap: 20px;
  }

  .popup-btns .btn {
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
  }

  .popup-btns .btn.fill-btn {
      background-color: #333;
      color: #fff;
  }

  .popup-btns .btn:hover {
      background-color: #555;
  }

  .hidden {
      display: none;
  }
</style>
